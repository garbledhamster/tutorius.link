<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Tuts · Tutorius</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#050208;--bg-alt:#140021;--accent:#7b2cff;--accent-lite:rgba(123,44,255,.18);--text:#f4f1ff;--text-muted:#bfb7ff;--radius:18px;--transition:.45s cubic-bezier(.4,.2,.2,1)}
*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}
html,body{min-height:100%;font-family:Inter,system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.7;scroll-behavior:smooth}
body{display:flex;flex-direction:column}
/* starfield */
body::before{content:"";position:fixed;inset:0;background-image:radial-gradient(2px 2px at 20% 30%,#fff 0,transparent 50%),radial-gradient(2px 2px at 70% 40%,#fff 0,transparent 50%),radial-gradient(1.5px 1.5px at 40% 80%,#fff 0,transparent 50%),radial-gradient(1.5px 1.5px at 80% 70%,#fff 0,transparent 50%);background-repeat:repeat;background-size:400px 400px;opacity:.2;pointer-events:none;animation: drift 160s linear infinite}
@keyframes drift{to{background-position:-4000px 2000px}}
header{position:sticky;top:0;z-index:50;background:rgba(20,0,33,.85);backdrop-filter:blur(10px);box-shadow:0 2px 10px rgba(0,0,0,.3)}
nav{max-width:1200px;margin:0 auto;padding:1rem 2rem;display:flex;align-items:center;justify-content:space-between;gap:1rem}
nav .logo{font-weight:700;font-size:1.2rem;text-decoration:none;color:var(--text)}
nav ul{display:flex;gap:2rem;list-style:none;align-items:center}
nav a{color:var(--text);text-decoration:none;position:relative;font-weight:600;font-size:.95rem;transition:color var(--transition)}
nav a:hover{color:var(--accent)}
.nav-right{display:flex;gap:1rem;align-items:center}
.mode-toggle{border:none;background:var(--bg-alt);color:var(--text);padding:.55rem 1rem;font-weight:600;border-radius:8px;cursor:pointer;transition:background var(--transition)}
.mode-toggle:hover{background:var(--accent-lite)}
.drawer-toggle{border:none;background:var(--accent);color:#fff;padding:.65rem 1.3rem;font-weight:600;border-radius:8px;cursor:pointer;transition:transform var(--transition),box-shadow var(--transition);font-family:inherit;font-size:.9rem}
.drawer-toggle:hover{transform:translateY(-2px);box-shadow:0 4px 16px rgba(123,44,255,.5)}
.drawer-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);opacity:0;visibility:hidden;transition:opacity var(--transition),visibility var(--transition);z-index:200}
.drawer-overlay.active{opacity:1;visibility:visible}
.drawer{position:fixed;top:0;right:0;bottom:0;width:min(90vw,400px);background:var(--bg-alt);box-shadow:-4px 0 24px rgba(0,0,0,.5);transform:translateX(100%);transition:transform var(--transition);z-index:300;display:flex;flex-direction:column}
.drawer.active{transform:translateX(0)}
.drawer-header{padding:1.5rem 2rem;border-bottom:2px solid var(--accent-lite);display:flex;justify-content:space-between;align-items:center}
.drawer-header h2{font-size:1.4rem;color:var(--accent)}
.drawer-close{background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer;padding:.5rem;transition:color var(--transition)}
.drawer-close:hover{color:var(--accent)}
.drawer-content{flex:1;overflow-y:auto;padding:1.5rem 2rem}
.drawer-menu{display:flex;flex-direction:column;gap:1rem}
.drawer-item{background:var(--bg);padding:1rem 1.5rem;border-radius:10px;border:2px solid transparent;cursor:pointer;transition:all var(--transition);font-weight:600;color:var(--text);text-align:left;font-family:inherit;font-size:.95rem}
.drawer-item:hover{border-color:var(--accent);transform:translateX(-4px)}
.drawer-item.active{background:var(--accent-lite);border-color:var(--accent);color:var(--accent)}
main{flex:1;padding:2rem 1.5rem 4rem}
.container{max-width:900px;margin:0 auto}
.loading{text-align:center;padding:4rem 2rem;color:var(--text-muted);font-size:1.1rem}
.error{text-align:center;padding:4rem 2rem;color:#ff6b6b;font-size:1.1rem}
#content{background:var(--bg-alt);padding:2.5rem;border-radius:var(--radius);box-shadow:0 4px 24px rgba(0,0,0,.45)}
#content h1{font-size:2.2rem;margin-bottom:1.5rem;color:var(--accent);border-bottom:2px solid var(--accent-lite);padding-bottom:.75rem}
#content h2{font-size:1.6rem;margin-top:2.5rem;margin-bottom:1rem;color:var(--text)}
#content h3{font-size:1.3rem;margin-top:2rem;margin-bottom:.75rem;color:var(--text)}
#content p{margin-bottom:1rem;line-height:1.8}
#content ul,#content ol{margin-left:1.5rem;margin-bottom:1rem}
#content li{margin-bottom:.5rem;line-height:1.7}
#content code{background:var(--bg);color:var(--accent);padding:.15rem .4rem;border-radius:4px;font-size:.9em;font-family:'Courier New',monospace}
#content pre{background:var(--bg);padding:1.2rem;border-radius:8px;overflow-x:auto;margin:1rem 0;border-left:3px solid var(--accent)}
#content pre code{background:none;padding:0;color:var(--text)}
#content strong{color:var(--accent);font-weight:700}
#content hr{border:none;border-top:1px solid var(--accent-lite);margin:2rem 0}
#content blockquote{border-left:3px solid var(--accent);padding-left:1rem;margin:1rem 0;color:var(--text-muted);font-style:italic}
#content a{color:var(--accent);text-decoration:none;border-bottom:1px solid var(--accent-lite);transition:border-color var(--transition)}
#content a:hover{border-bottom-color:var(--accent)}
footer{text-align:center;padding:2rem 1rem;font-size:.85rem;color:var(--text-muted)}
@media(max-width:768px){
nav ul{gap:1rem}
nav a{font-size:.85rem}
.drawer{width:100%}
#content{padding:1.5rem}
#content h1{font-size:1.8rem}
}
@media(prefers-color-scheme:light){
:root[data-theme='light']{--bg:#fff;--bg-alt:#fafafa;--text:#212121;--text-muted:#555;--accent:#5c2dff;--accent-lite:rgba(92,45,255,.18)}
}
</style>
</head>
<body>
<header>
<nav>
<a class="logo" href="index.html">Tutorius</a>
<ul>
<li><a href="index.html">Home</a></li>
<li><a href="#" id="tutsMenuBtn" aria-expanded="false" aria-controls="drawer" aria-haspopup="dialog">Tuts</a></li>
</ul>
<div class="nav-right">
<button class="mode-toggle" id="modeBtn">☾</button>
</div>
</nav>
</header>
<div class="drawer-overlay" id="drawerOverlay"></div>
<div class="drawer" id="drawer" role="dialog" aria-labelledby="drawerTitle" aria-modal="true">
<div class="drawer-header">
<h2 id="drawerTitle">✦ Tuts</h2>
<button class="drawer-close" id="drawerClose" aria-label="Close menu">✕</button>
</div>
<div class="drawer-content">
<div class="drawer-menu">
<button class="drawer-item" data-sheet="Windows_11">Windows 11</button>
<button class="drawer-item" data-sheet="MacOS_26">macOS</button>
</div>
</div>
</div>
<main>
<div class="container">
<div id="loading" class="loading">Loading tut...</div>
<div id="error" class="error" style="display:none"></div>
<div id="content" style="display:none"></div>
</div>
</main>
<footer>
Made with ✦ by Joe Rice · © 2025 Tutorius
</footer>
<script>
// Theme management
const modeBtn=document.getElementById('modeBtn');
const html=document.documentElement;
modeBtn.addEventListener('click',()=>{
const now=html.getAttribute('data-theme')==='dark'?'light':'dark';
html.setAttribute('data-theme',now);
modeBtn.textContent=now==='dark'?'☾':'☀︎';
localStorage.setItem('tutorius-theme',now);
});
html.setAttribute('data-theme',localStorage.getItem('tutorius-theme')||'dark');
modeBtn.textContent=html.getAttribute('data-theme')==='dark'?'☾':'☀︎';

// Drawer functionality
const drawer=document.getElementById('drawer');
const drawerOverlay=document.getElementById('drawerOverlay');
const tutsMenuBtn=document.getElementById('tutsMenuBtn');
const drawerClose=document.getElementById('drawerClose');

function openDrawer(){
drawer.classList.add('active');
drawerOverlay.classList.add('active');
tutsMenuBtn.setAttribute('aria-expanded','true');
// Focus the close button for accessibility
setTimeout(()=>drawerClose.focus(),100);
}

function closeDrawer(){
drawer.classList.remove('active');
drawerOverlay.classList.remove('active');
tutsMenuBtn.setAttribute('aria-expanded','false');
// Return focus to the button that opened the drawer
tutsMenuBtn.focus();
}

tutsMenuBtn.addEventListener('click',(e)=>{
e.preventDefault();
openDrawer();
});

drawerClose.addEventListener('click',closeDrawer);
drawerOverlay.addEventListener('click',closeDrawer);

// Close drawer on escape key
document.addEventListener('keydown',(e)=>{
if(e.key==='Escape'&&drawer.classList.contains('active')){
closeDrawer();
}
});

// Cheat sheet loader
const contentDiv=document.getElementById('content');
const loadingDiv=document.getElementById('loading');
const errorDiv=document.getElementById('error');
const drawerItems=document.querySelectorAll('.drawer-item');

// Get sheet from URL parameter or default to Windows_11
const urlParams=new URLSearchParams(window.location.search);
let currentSheet=urlParams.get('sheet')||'Windows_11';

// Simple markdown parser
function parseMarkdown(md){
// Escape HTML
md=md.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
// Code blocks first (so they don't get processed)
let codeBlocks=[];
md=md.replace(/```(\w*)\n([\s\S]*?)```/g,(match,lang,code)=>{
const placeholder=`__CODEBLOCK_${codeBlocks.length}__`;
codeBlocks.push(`<pre><code>${code.trim()}</code></pre>`);
return placeholder;
});
// Inline code
md=md.replace(/`([^`]+)`/g,'<code>$1</code>');
// Headers
md=md.replace(/^### (.*)$/gm,'<h3>$1</h3>');
md=md.replace(/^## (.*)$/gm,'<h2>$1</h2>');
md=md.replace(/^# (.*)$/gm,'<h1>$1</h1>');
// Bold
md=md.replace(/\*\*([^\*]+)\*\*/g,'<strong>$1</strong>');
// Links
md=md.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>');
// Horizontal rule
md=md.replace(/^---$/gm,'<hr>');
// Process lists and paragraphs
let lines=md.split('\n');
let result=[];
let inList=false;
let listType='';
for(let i=0;i<lines.length;i++){
const line=lines[i].trim();
if(!line){
if(inList){result.push(listType==='ul'?'</ul>':'</ol>');inList=false;}
result.push('');
continue;
}
// Unordered list
if(line.match(/^[-*]\s/)){
if(!inList||listType!=='ul'){
if(inList)result.push(listType==='ul'?'</ul>':'</ol>');
result.push('<ul>');
inList=true;
listType='ul';
}
result.push('<li>'+line.replace(/^[-*]\s/,'')+'</li>');
}
// Ordered list
else if(line.match(/^\d+\.\s/)){
if(!inList||listType!=='ol'){
if(inList)result.push(listType==='ul'?'</ul>':'</ol>');
result.push('<ol>');
inList=true;
listType='ol';
}
result.push('<li>'+line.replace(/^\d+\.\s/,'')+'</li>');
}
// Regular line
else{
if(inList){result.push(listType==='ul'?'</ul>':'</ol>');inList=false;}
if(line.match(/^<h[1-3]>|^<hr>/)){
result.push(line);
}else{
result.push(line);
}
}
}
if(inList)result.push(listType==='ul'?'</ul>':'</ol>');
// Join and wrap non-header, non-list content in paragraphs
let html=result.join('\n');
html=html.replace(/\n{2,}/g,'\n\n');
let finalLines=html.split('\n');
let finalResult=[];
let paragraph=[];
for(let line of finalLines){
if(!line.trim()){
if(paragraph.length){
finalResult.push('<p>'+paragraph.join(' ')+'</p>');
paragraph=[];
}
}else if(line.match(/^<(h[1-3]|ul|ol|li|p|hr)>/)){  // Match HTML tags: headers, lists, paragraphs, horizontal rules
if(paragraph.length){
finalResult.push('<p>'+paragraph.join(' ')+'</p>');
paragraph=[];
}
finalResult.push(line);
}else{
paragraph.push(line);
}
}
if(paragraph.length)finalResult.push('<p>'+paragraph.join(' ')+'</p>');
html=finalResult.join('');
// Restore code blocks
codeBlocks.forEach((block,i)=>{
html=html.replace(`__CODEBLOCK_${i}__`,block);
});
return html;
}

async function loadSheet(sheetName){
loadingDiv.style.display='block';
contentDiv.style.display='none';
errorDiv.style.display='none';
currentSheet=sheetName;
// Update URL without reload
const newUrl=new URL(window.location);
newUrl.searchParams.set('sheet',sheetName);
window.history.pushState({},'',newUrl);
// Update active button
drawerItems.forEach(btn=>{
if(btn.dataset.sheet===sheetName){
btn.classList.add('active');
}else{
btn.classList.remove('active');
}
});
try{
const response=await fetch(`pages/${sheetName}.md`);
if(!response.ok){
throw new Error(`Failed to load ${sheetName}.md`);
}
const markdown=await response.text();
const html=parseMarkdown(markdown);  // Note: parseMarkdown() escapes HTML entities to prevent XSS
contentDiv.innerHTML=html;
contentDiv.style.display='block';
loadingDiv.style.display='none';
// Close drawer after selection
closeDrawer();
// Scroll to top
window.scrollTo({top:0,behavior:'smooth'});
}catch(error){
console.error('Error loading sheet:',error);
errorDiv.textContent=`Failed to load tut: ${error.message}`;
errorDiv.style.display='block';
loadingDiv.style.display='none';
}
}

// Add click handlers to drawer items
drawerItems.forEach(btn=>{
btn.addEventListener('click',()=>{
loadSheet(btn.dataset.sheet);
});
});

// Load initial sheet
loadSheet(currentSheet);
</script>
</body>
</html>
